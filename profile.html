<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Profile</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  user-select:none;
  -webkit-user-select:none;
  -webkit-touch-callout:none;
  -webkit-tap-highlight-color: transparent;
}
html, body {
  height: 100%;
  overflow: hidden;
}
body{
  background:#FF8C00;
  display: flex;
  flex-direction: column;
}

/* HIDE SCROLLBARS */
@media (max-width: 768px) {
  .card::-webkit-scrollbar {
    display: none;
  }
  
  .card {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

/* TOP SECTION - FIXED HEIGHT */
.top-section{
  padding:25px 20px 20px;
  background:#FF8C00;
  flex-shrink: 0;
}

/* USER */
.user{
  display:flex;
  gap:14px;
  align-items:center;
  margin-bottom:25px;
}
.avatar{
  width:75px;
  height:75px;
  border-radius:50%;
  overflow:hidden;
  border:4px solid rgba(255,255,255,0.3);
}
.avatar img{
  width:100%;
  height:100%;
  object-fit:cover;
  pointer-events:none
}
.user-info b{
  font-size:20px;
  color:#fff;
  text-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
.user-info{
  color:#fff;
  font-size:15px;
}

/* BALANCE - TANPA CARD */
.balance{
  display:flex;
  justify-content:space-between;
  text-align:center;
  margin:25px 0;
  padding:20px 15px;
  background: rgba(255,255,255,0.15);
  border-radius: 16px;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.2);
}
.balance div{flex:1}
.balance h3{
  font-size:22px;
  color:#fff;
  text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}
.balance span{
  font-size:14px;
  color:rgba(255,255,255,0.9);
}

/* ICON MENU - TANPA CARD */
.icon-menu{
  background: rgba(255,255,255,0.15);
  border-radius:18px;
  padding:18px 12px;
  display:flex;
  justify-content:space-between;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.2);
  margin-bottom: 20px;
}
.icon-menu a{
  width:23%;
  text-align:center;
  text-decoration:none;
  color:#fff;
  font-size:13px;
  font-weight: 600;
}
.icon-box{
  width:55px;
  height:55px;
  margin:0 auto 8px;
  border-radius:14px;
  background:rgba(255,255,255,0.25);
  display:flex;
  align-items:center;
  justify-content:center;
}
.icon-box img{
  width:28px;
  height:28px;
  object-fit: contain;
}

/* CARD - SCROLLABLE AREA */
.card{
  background:#fff;
  border-radius:26px 26px 0 0;
  padding:25px 20px 30px; /* Reduced bottom padding */
  flex: 1;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  max-height: calc(100vh - 350px); /* Limit maximum height */
  min-height: 300px; /* Minimum height */
}

/* LIST */
.list{
  border-top:1px solid #eee;
  margin-top: 5px;
  margin-bottom: 20px; /* Reduced margin */
}
.item{
  display:flex;
  align-items:center;
  padding:16px 10px;
  border-bottom:1px solid #eee;
  font-size:15px;
  color:#333;
  text-decoration:none;
}
.item img{
  width:24px;
  height:24px;
  margin-right:15px;
  object-fit: contain;
}
.item::after{
  content:'â€º';
  margin-left:auto;
  color:#ccc;
  font-size:24px;
  font-weight: bold;
}

/* LOGOUT - ALWAYS VISIBLE */
.logout{
  margin:30px 0 20px; /* Reduced bottom margin */
  padding-bottom: 10px;
}
.logout button{
  width:100%;
  padding:16px;
  border:none;
  border-radius:30px;
  background:linear-gradient(135deg, #FF8C00, #FF6B00);
  color:#fff;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  transition: all 0.2s;
  box-shadow: 0 4px 10px rgba(255, 107, 0, 0.2);
}
.logout button:active{
  transform: scale(0.98);
}

/* BOTTOM NAVIGATION */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(255, 255, 255, 0.98);
  display: flex;
  justify-content: space-around;
  padding: 12px 0;
  border-top: 1px solid #e0e0e0;
  z-index: 100;
  backdrop-filter: blur(10px);
  flex-shrink: 0;
}

.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-decoration: none;
}

.nav-icon {
  font-size: 20px;
  color: #888;
  margin-bottom: 3px;
}

.nav-label {
  font-size: 10px;
  font-weight: 700;
  color: #888;
}

.nav-item.active .nav-icon,
.nav-item.active .nav-label {
  color: #FF8C00;
}

/* RESPONSIVE */
@media (max-height: 700px) {
  .avatar {
    width: 65px;
    height: 65px;
  }
  
  .user-info b {
    font-size: 18px;
  }
  
  .balance {
    padding: 18px 12px;
    margin: 20px 0;
  }
  
  .balance h3 {
    font-size: 20px;
  }
  
  .icon-box {
    width: 50px;
    height: 50px;
  }
  
  .icon-box img {
    width: 26px;
    height: 26px;
  }
  
  .card {
    max-height: calc(100vh - 320px);
    padding-bottom: 25px;
  }
}

@media (max-width: 360px) {
  .top-section {
    padding: 20px 15px 15px;
  }
  
  .user-info b {
    font-size: 17px;
  }
  
  .user-info {
    font-size: 14px;
  }
  
  .balance h3 {
    font-size: 18px;
  }
  
  .balance span {
    font-size: 13px;
  }
  
  .item {
    padding: 14px 8px;
    font-size: 14px;
  }
  
  .logout button {
    padding: 14px;
    font-size: 15px;
  }
  
  .card {
    max-height: calc(100vh - 300px);
  }
}
</style>
</head>

<body>

<!-- TANPA CARD - BACKGROUND OREN -->
<div class="top-section">

  <div class="user">
    <div class="avatar">
      <img src="https://files.catbox.moe/wg0w1e.png">
    </div>
    <div class="user-info">
      <b id="phone">-</b><br>
      ID: <b id="invite">-</b>
    </div>
  </div>

  <!-- SALDO, DEPOSIT, PENARIKAN - TANPA CARD -->
  <div class="balance">
    <div><h3 id="saldo">Rp0</h3><span>Saldo</span></div>
    <div><h3 id="deposit">Rp0</h3><span>Deposit</span></div>
    <div><h3 id="withdraw">Rp0</h3><span>Penarikan</span></div>
  </div>

  <!-- MENU ICON - TANPA CARD -->
  <div class="icon-menu">
    <a href="gift.html">
      <div class="icon-box"><img src="https://files.catbox.moe/a9s1cu.png"></div>
      Gift Code
    </a>
    <a href="my-orders.html">
      <div class="icon-box"><img src="https://files.catbox.moe/4ppa77.png"></div>
      My Order
    </a>
    <a href="deposit.html">
      <div class="icon-box"><img src="https://files.catbox.moe/p0e4gz.png"></div>
      Deposit
    </a>
    <a href="penarikan.html">
      <div class="icon-box"><img src="https://files.catbox.moe/mee7i9.png"></div>
      Penarikan
    </a>
  </div>

</div>

<!-- CARD PUTIH KHUSUS MENU LIST SAJA - SCROLLABLE -->
<div class="card">

  <div class="list">
    <a class="item" href="about.html"><img src="https://files.catbox.moe/m8fmvm.png">Tentang Kami</a>
    <a class="item" href="komisi.html"><img src="https://files.catbox.moe/6vzkfz.png">Riwayat Komisi</a>
    <a class="item" href="withdraw-history.html"><img src="https://files.catbox.moe/hplce0.png">Riwayat Withdraw</a>
    <a class="item" href="deposit-history.html"><img src="https://files.catbox.moe/zgcv9s.png">Riwayat Deposit</a>
    <a class="item" href="password.html"><img src="https://files.catbox.moe/ieq6h3.png">Password</a>
  </div>

  <div class="logout">
    <button id="logoutBtn">LOGOUT</button>
  </div>

</div>

<!-- BOTTOM NAVIGATION -->
<nav class="bottom-nav">
  <a href="home.html" class="nav-item">
    <i class="fas fa-home nav-icon"></i>
    <div class="nav-label">Home</div>
  </a>
  
  <a href="plans.html" class="nav-item">
    <i class="fas fa-tractor nav-icon"></i>
    <div class="nav-label">Plans</div>
  </a>
  
  <a href="team.html" class="nav-item">
    <i class="fas fa-users nav-icon"></i>
    <div class="nav-label">Team</div>
  </a>
  
  <a href="profile.html" class="nav-item active">
    <i class="fas fa-user nav-icon"></i>
    <div class="nav-label">Profile</div>
  </a>
</nav>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-analytics-compat.js"></script>

<script>
// Cegah error saat refresh dengan memastikan DOM siap
document.addEventListener('DOMContentLoaded', function() {
  
  // Konfigurasi Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyAuJSxpcFZ1QI-dEsEnx2qSqlb0wsvs6Mc",
    authDomain: "lginvest-776cf.firebaseapp.com",
    databaseURL: "https://lginvest-776cf-default-rtdb.firebaseio.com",
    projectId: "lginvest-776cf",
    storageBucket: "lginvest-776cf.firebasestorage.app",
    messagingSenderId: "831934282072",
    appId: "1:831934282072:web:6a8b7a5bcba5d4d1264d2d",
    measurementId: "G-265YF9DYCF"
  };

  // Inisialisasi Firebase hanya jika belum diinisialisasi
  if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
  }
  
  const db = firebase.firestore();
  const analytics = firebase.analytics();

  // Ambil data user
  const uid = localStorage.getItem('foxconn_userId');
  
  // Format angka
  function formatNumber(num) {
    if (!num) return "0";
    return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
  }

  // Load data user
  function loadUserData() {
    if(uid){
      db.collection('users').doc(uid).get().then(doc => {
        if(!doc.exists) {
          console.log("User tidak ditemukan");
          return;
        }
        const user = doc.data();
        
        // Update UI dengan data dari Firebase
        document.getElementById('phone').innerText = user.phone || '-';
        document.getElementById('invite').innerText = user.invite || '-';
        document.getElementById('saldo').innerText = 'Rp ' + formatNumber(user.saldo);
        document.getElementById('deposit').innerText = 'Rp ' + formatNumber(user.deposit);
        document.getElementById('withdraw').innerText = 'Rp ' + formatNumber(user.withdraw);
      }).catch(error => {
        console.error("Error getting user data:", error);
      });
    } else {
      console.log("User ID tidak ditemukan di localStorage");
    }
  }

  // Load data saat halaman dimuat
  loadUserData();

  // Logout button handler
  document.getElementById('logoutBtn').addEventListener('click', function() {
    // Tampilkan alert konfirmasi
    if(confirm("Apakah Anda yakin ingin keluar dari akun Anda?")) {
      // Hapus data login dari localStorage
      localStorage.removeItem('foxconn_userId');
      localStorage.removeItem('foxconn_userPhone');
      localStorage.removeItem('foxconn_userData');
      
      // Redirect ke index.html
      window.location.href = 'index.html';
    }
  });

  // Preload gambar untuk navigasi bawah (FontAwesome)
  if (!document.querySelector('link[href*="font-awesome"]')) {
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css';
    document.head.appendChild(link);
  }

  // Disable right click
  document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
    return false;
  });

  // Prevent image dragging
  document.addEventListener('dragstart', e => e.preventDefault());
  document.addEventListener('touchstart', e => {
    if(e.target.tagName === 'IMG') e.preventDefault();
  }, {passive: false});

});

</script>

</body>
</html>